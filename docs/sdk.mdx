---
title: "SDK"
description: "TypeScript client and React hooks for deployed agents"
---

Build applications on top of your deployed agents. The SDK handles streaming, sessions, and error handling.

```bash
npm install superserve
```

```typescript
import Superserve from "superserve"

const client = new Superserve({ apiKey: "your-api-key" })
```

---

## Run

Send a message, get a response. Creates a session, sends the message, tears down.

```typescript
const result = await client.run("code-reviewer", {
  message: "Review the error handling in src/auth.ts",
})

console.log(result.text)
console.log(result.duration)    // 3.8
console.log(result.toolCalls)   // [{ name: "read_file", input: {...}, output: "..." }]
```

**RunResult:**

| Field | Type | Description |
|-------|------|-------------|
| `text` | `string` | Full response |
| `toolCalls` | `ToolCall[]` | Tools invoked during the run |
| `duration` | `number` | Seconds |
| `finishReason` | `string` | `"completed"` or `"failed"` |

---

## Stream

Stream tokens as they arrive.

```typescript
const stream = client.stream("code-reviewer", {
  message: "Refactor the database connection pool",
  onText: (text) => process.stdout.write(text),
  onToolStart: (tool) => console.log(`→ ${tool.name}`),
  onToolEnd: (tool) => console.log(`✓ ${tool.name}`),
  onFinish: (result) => console.log(`\nDone in ${result.duration}s`),
})

await stream.result
```

Or iterate directly:

```typescript
const stream = client.stream("code-reviewer", {
  message: "Write tests for the auth module",
})

for await (const chunk of stream.textStream) {
  process.stdout.write(chunk)
}
```

**AgentStream:**

| Property | Type | Description |
|----------|------|-------------|
| `textStream` | `AsyncIterable<string>` | Text chunks as they arrive |
| `result` | `Promise<RunResult>` | Resolves on completion |
| `abort()` | `() => void` | Cancel the stream |

---

## Sessions

Multi-turn conversations. The agent's workspace and memory persist between messages.

```typescript
const session = await client.createSession("code-reviewer")

const r1 = await session.run("What files handle authentication?")
// "Authentication is handled in src/auth.ts and src/middleware/auth.ts..."

const r2 = await session.run("Add rate limiting to the login endpoint")
// Agent remembers context from r1

const r3 = session.stream("Now write tests for the rate limiter")
for await (const chunk of r3.textStream) {
  process.stdout.write(chunk)
}

await session.end()
```

**Session:**

| Method | Type | Description |
|--------|------|-------------|
| `id` | `string` | Session ID |
| `run(message)` | `Promise<RunResult>` | Send and wait |
| `stream(message)` | `AgentStream` | Send and stream |
| `end()` | `Promise<void>` | End the session |

---

## Agents

```typescript
const agents = await client.agents.list()
const agent = await client.agents.get("code-reviewer")
// { id: "agt_7c9e...", name: "code-reviewer", command: "python agent.py" }
```

---

## React

Build chat interfaces with `useAgent`. Manages messages, streaming, and sessions automatically.

```bash
npm install superserve react
```

```tsx
import { SuperserveProvider, useAgent } from "superserve/react"

function App() {
  return (
    <SuperserveProvider apiKey="your-api-key">
      <Chat />
    </SuperserveProvider>
  )
}

function Chat() {
  const { messages, sendMessage, isStreaming } = useAgent({
    agent: "code-reviewer",
  })

  return (
    <div>
      {messages.map((msg) => (
        <div key={msg.id}>
          <strong>{msg.role}:</strong> {msg.text}
        </div>
      ))}

      {isStreaming && <p>Thinking...</p>}

      <form onSubmit={(e) => {
        e.preventDefault()
        const input = e.currentTarget.elements.namedItem("msg") as HTMLInputElement
        sendMessage(input.value)
        input.value = ""
      }}>
        <input name="msg" placeholder="Send a message..." />
      </form>
    </div>
  )
}
```

**useAgent options:**

| Option | Type | Description |
|--------|------|-------------|
| `agent` | `string` | Agent name or ID |
| `sessionId` | `string?` | Resume an existing session |

**useAgent return:**

| Field | Type | Description |
|-------|------|-------------|
| `messages` | `Message[]` | All messages |
| `sendMessage` | `(text: string) => void` | Send a message |
| `isStreaming` | `boolean` | Response in progress |
| `error` | `Error \| null` | Last error |
| `sessionId` | `string \| null` | Current session ID |

---

## Configuration

```typescript
const client = new Superserve({
  apiKey: "your-api-key",     // required
  baseUrl: "https://...",     // default: https://api.superserve.ai
  timeout: 30000,             // ms, default: 30000
})
```

## Errors

```typescript
import { AuthenticationError, NotFoundError, SuperserveError } from "superserve"

try {
  await client.run("my-agent", { message: "Hello" })
} catch (e) {
  if (e instanceof AuthenticationError) { /* bad API key */ }
  if (e instanceof NotFoundError) { /* agent doesn't exist */ }
  if (e instanceof SuperserveError) { console.error(e.status, e.message) }
}
```
